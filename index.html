```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Vistoria de Hidrantes</title>
  <style>
    body { font-family: Arial, sans-serif; }
    .hidrante { padding:10px; margin:5px; border:1px solid #ccc; cursor:pointer; display:inline-block; }
    .vistoriado { background: lightgreen; }
    #formModal { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); }
    #formContent { background:#fff; padding:20px; max-width:600px; margin:50px auto; }
    button { margin-top:5px; }
  </style>
</head>
<body>

<h2>Vistorias de Hidrantes</h2>
<label>Nome do vistoriador:</label>
<input type="text" id="vistoriadorNome"><br><br>

<div id="listaHidrantes"></div>

<div id="formModal">
  <div id="formContent">
    <h3 id="formTitulo"></h3>
    <p id="formDescricao"></p>
    <form id="formHidrante">
      <!-- Pergunta inicial -->
      <div class="pergunta">
        <label id="perguntaMangueira"></label><br>
        <select name="possuiMangueira" id="possuiMangueira">
          <option value="-">-</option>
          <option value="Sim">Sim</option>
          <option value="Não">Não</option>
        </select>
      </div>

      <!-- Container para blocos de mangueiras -->
      <div id="mangueirasContainer"></div>

      <hr>
      <label>Esguicho presente?</label>
      <select name="esguichoPresente">
        <option value="-">-</option>
        <option value="Sim">Sim</option>
        <option value="Não">Não</option>
      </select><br>

      <label>Tipo de esguicho:</label>
      <select name="tipoEsguicho">
        <option value="-">-</option>
        <option value="Regulável">Regulável</option>
        <option value="Agulheta">Agulheta</option>
      </select><br>

      <label>Chave Storz presente?</label>
      <select name="chaveStorz">
        <option value="-">-</option>
        <option value="Sim">Sim</option>
        <option value="Não">Não</option>
      </select><br>

      <label>Equipe:</label>
      <select name="equipe">
        <option value="-">-</option>
        <option value="Alfa">Alfa</option>
        <option value="Bravo">Bravo</option>
        <option value="Charlie">Charlie</option>
        <option value="Delta">Delta</option>
      </select><br>

      <label>Observações:</label><br>
      <textarea name="observacoes"></textarea><br>

      <button type="submit">Enviar</button>
      <button type="button" id="cancelar">Cancelar</button>
    </form>
  </div>
</div>

<script>
// Configuração dos hidrantes
const hidrantesConfig = {
  "01": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante saída emergência" },
  "02": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante elevador" },
  "03": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante corredor sul" },
  "04": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante garagem" },
  "05": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante entrada principal" },
  "06": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante auditório" },
  "07": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante sala técnica" },
  "08": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante copa" },
  "09": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante corredor norte" },
  "10": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante estacionamento" },
  "11": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante entrada lateral" },
  "12": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante laboratório" },
  "13": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante biblioteca" },
  "14": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante recepção" },
  "15": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante depósito" },
  "16": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante corredor B" },
  "17": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante saída lateral" },
  "18": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante sala reunião" },
  "19": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante auditório B" },
  "20": { quantidade: 3, tipo: "3", polegada: "2 1/2\"", tamanho: "30", descricao: "Hidrante entrada fundos" },
  "21": { quantidade: 1, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante corredor C" },
  "22": { quantidade: 2, tipo: "2", polegada: "1 1/2\"", tamanho: "20", descricao: "Hidrante cozinha" }
};
}

// Renderizar lista
const hidrantesListDiv = document.getElementById("hidrantesList");
Object.keys(hidrantesConfig).forEach(num=>{
  const div = document.createElement("div");
  div.classList.add("hidrante");
  div.dataset.numero = num;
  div.dataset.edificacao = `Edificação ${num}`;
  div.dataset.descricao = hidrantesConfig[num].descricao;
  div.innerText = `Hidrante ${num}`;
  hidrantesListDiv.appendChild(div);
});
let hidranteAtual=null;
let mangueiraCount=0;

function abrirFormulario(div){
  if(!document.getElementById("vistoriadorNome").value){
    alert("Preencha o nome do vistoriador antes!");
    return;
  }
  hidranteAtual=div;
  const num=div.dataset.numero;
  const conf=hidrantesConfig[num];
  document.getElementById("formTitulo").textContent="Hidrante "+String(num).padStart(2,"0");
  document.getElementById("formDescricao").textContent=conf.descricao+" - "+conf.edificacao;
  document.getElementById("perguntaMangueira").textContent=
    `Possui ${conf.quantidade} mangueiras do Tipo ${conf.tipo} de ${conf.polegada} de ${conf.tamanho} m?`;
  document.getElementById("possuiMangueira").value="-";
  document.getElementById("mangueirasContainer").innerHTML="";
  mangueiraCount=0;
  document.getElementById("formModal").style.display="block";
}

// Cancelar
document.getElementById("cancelar").onclick=()=>document.getElementById("formModal").style.display="none";

// Pergunta inicial muda
document.getElementById("possuiMangueira").addEventListener("change",function(){
  const container=document.getElementById("mangueirasContainer");
  container.innerHTML="";
  mangueiraCount=0;
  if(this.value==="Não"){ adicionarMangueira(); }
});

function adicionarMangueira(){
  mangueiraCount++;
  const container=document.getElementById("mangueirasContainer");
  const bloco=document.createElement("div");
  bloco.classList.add("mangueira");
  bloco.innerHTML=`
    <h4>Mangueira ${mangueiraCount}</h4>
    <label>Tipo:</label>
    <select name="tipoMangueira">
      <option value="-">-</option>
      <option value="2">Tipo 2</option>
      <option value="3">Tipo 3</option>
      <option value="4">Tipo 4</option>
    </select><br>
    <label>Comprimento:</label>
    <select name="comprimentoMangueira">
      <option value="-">-</option>
      <option value="15">15 m</option>
      <option value="20">20 m</option>
      <option value="30">30 m</option>
    </select><br>
    <label>Polegada:</label>
    <select name="polegadaMangueira">
      <option value="-">-</option>
      <option value='1 1/2"'>1 ½"</option>
      <option value='2 1/2"'>2 ½"</option>
    </select><br>
  `;
  container.appendChild(bloco);

  if(!document.getElementById("btnAddMangueira")){
    const btn=document.createElement("button");
    btn.type="button"; btn.id="btnAddMangueira";
    btn.textContent="+ Adicionar Mangueira";
    btn.onclick=adicionarMangueira;
    container.appendChild(btn);
  }
  if(mangueiraCount>1 && !document.getElementById("btnCopiarMangueira")){
    const btnC=document.createElement("button");
    btnC.type="button"; btnC.id="btnCopiarMangueira";
    btnC.textContent="Copiar última Mangueira";
    btnC.onclick=copiarMangueiraAnterior;
    container.appendChild(btnC);
  }
}

function copiarMangueiraAnterior(){
  if(mangueiraCount<2)return;
  const blocos=document.querySelectorAll("#mangueirasContainer .mangueira");
  const ultima=blocos[mangueiraCount-2];
  const nova=blocos[mangueiraCount-1];
  nova.querySelector("select[name='tipoMangueira']").value=ultima.querySelector("select[name='tipoMangueira']").value;
  nova.querySelector("select[name='comprimentoMangueira']").value=ultima.querySelector("select[name='comprimentoMangueira']").value;
  nova.querySelector("select[name='polegadaMangueira']").value=ultima.querySelector("select[name='polegadaMangueira']").value;
}

function coletarMangueiras(){
  const possui=document.getElementById("possuiMangueira").value;
  const mangueiras=[];
  if(possui==="Não"){
    document.querySelectorAll("#mangueirasContainer .mangueira").forEach(bloco=>{
      mangueiras.push({
        tipo: bloco.querySelector("select[name='tipoMangueira']").value || "-",
        comprimento: bloco.querySelector("select[name='comprimentoMangueira']").value || "-",
        polegada: bloco.querySelector("select[name='polegadaMangueira']").value || "-"
      });
    });
  }
  return { possui, quantidade: mangueiras.length, dados:mangueiras };
}

// Envio
document.getElementById("formHidrante").addEventListener("submit",async function(e){
  e.preventDefault();
  const numero=hidranteAtual.dataset.numero;
  const conf=hidrantesConfig[numero];
  const mang=coletarMangueiras();
  const dados={
    numero,
    edificacao: conf.edificacao,
    descricao: conf.descricao,
    mangueiras: mang,
    esguichoPresente: this.esguichoPresente.value||"-",
    tipoEsguicho: this.tipoEsguicho.value||"-",
    chaveStorz: this.chaveStorz.value||"-",
    equipe: this.equipe.value||"-",
    observacoes: this.observacoes.value||"-",
    vistoriador: document.getElementById("vistoriadorNome").value,
    dataVistoria: new Date().toISOString()
  };
  const url="COLE_AQUI_SEU_URL_WEBAPP";
  try{
    const res=await fetch(url,{method:"POST",body:JSON.stringify(dados)});
    const json=await res.json();
    if(json.status==="ok"){
      hidranteAtual.classList.add("vistoriado");
      document.getElementById("formModal").style.display="none";
      alert("Vistoria salva!");
    }else{ alert("Erro: "+json.mensagem); }
  }catch(err){ alert("Falha: "+err.message); }
});
</script>

</body>
</html>
```
